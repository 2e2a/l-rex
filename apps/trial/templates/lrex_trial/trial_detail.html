{% extends "lrex_home/base.html" %}

{% block content %}
<table class="table bg-white">
    <thead>
    <tr>
        <th>Experiment</th>
        <th>Item</th>
        {% if study.pseudo_randomize_question_order %}<th>Question order</th>{% endif %}
        <th>Content</th>
        {% if study.has_question_with_random_scale %}
        <th>Random scale</th>
        {% endif %}
        {% for question in trial.questionnaire.study.questions %}
        <th>Rating</th>
        {% if question.has_rating_comment %}
        <th>Comment</th>
        {% endif %}
        {% endfor %}
    </tr>
    </thead>
    <tbody>
    {% for q_item, ratings in trial.questionnaire_item_ratings %}
    <tr>
        <td>{{ q_item.item.experiment }}</td>
        <td>
            {{ q_item.item }}
        </td>
        {% if study.pseudo_randomize_question_order %}
        <td>{{ q_item.question_order_user }}</td>
        {% endif %}
        <td>
            {% if q_item.item.textitem %}
                {{ q_item.item.textitem.text|linebreaks }}
            {% else %}
                <audio controls="controls">
                    <source src="{{ q_item.item.audiolinkitem.url }}">
                    Your browser does not support the <code>audio</code> element.
                </audio>
            {% endif %}
        </td>
        {% if study.has_question_with_random_scale %}
        <td>
            {% for question_property in q_item.question_properties %}
            Q{{ forloop.counter }}: "{{ question_property.question_scale_user }}"<br>
            {% endfor %}
        </td>
        {% endif %}
        {% for rating in ratings %}
        <td>
            {{ rating.scale_value.label }}
        </td>
        {% if rating.question_object.has_rating_comment %}
        <td>
            {% if rating.comment %}
            "{{ rating.comment }}"
            {% endif %}
        </td>
        {% endif %}
        {% endfor %}
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
